@(id: Int, year: Int, volumeId: Int, transferRequests: Seq[models.copyright.CopyrightTransferRequestWrapper], journals: List[models.rankings.Journal])(implicit request: Request[AnyContent])
@import models.copyright.CopyrightTransferStatus

@main("Transfer management") {

    <style type="text/css">
    #table-filter {
    padding : 10 px 0 px ;
    }

    .gap-sides {
    margin : 0 px 10 px ;
    }

    #data-table td : first-child, #data-table th : first-child {
    text-align : center ;
    }

    .green {
    color : #1be533 ;
    }

    .red {
    color : #e51b24 ;
    }
    </style>

    @helper.form(action = routes.CopyrightTransferManagement.generateReport(), 'id -> "authors-form") {
        <div>
            <div>
                <div class="form-inline">
                    <div class="form-group">
                        <span>Journal</span>
                        <select id="journal-select" class="form-control gap-sides" name="journalId">

                        @for(i <- 0 until journals.size) {
                            <option value="@journals(i).id" @if(i + 1 == id) {
                                    selected="selected" } >
                            @journals(i).title
                            </option>
                        }
                        </select>
                    </div>
                    <div class="form-group">
                        <span>Year</span>
                        <select id="year-select" class="form-control gap-sides">
                                <!-- FIXME: needs dao -->
                            <option @if(year == 2014) { selected="selected" }>2014</option>
                            <option @if(year == 2013) { selected="selected" }>2013</option>
                            <option @if(year == 2012) { selected="selected" }>2012</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <span>Volume</span>
                        <select id="issue-select" class="form-control gap-sides">
                                <!-- FIXME: needs dao -->
                            <option @if(volumeId == 3) { selected="selected" } value="3">Vol 13, No 1</option>
                            <option @if(volumeId == 2) { selected="selected" } value="2">Vol 13, No 2</option>
                            <option @if(volumeId == 1) { selected="selected" } value="1">Vol 13, No 3</option>
                            <option @if(volumeId == 0) { selected="selected" } value="0">Vol 13, No 4</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <div class="input-filter-container"><input type="search" class="form-control" placeholder="Find..." size="15" id="input-filter"></div>
                    </div>
                    <div class="form-group">
                        <div><input type="checkbox" id="show-only-confirmed"> Show only confirmed</div>
                    </div>
                </div>
            </div>

            <table id="data-table" class="table table-striped">
                <thead>
                    <tr>
                        <th><input class="selected-author" type="checkbox" data-author-id="id_from_db" name="people[]"></th>
                        <th>Paper title</th>
                        <th>Confirmation status</th>
                        <th>Contact author</th>
                        <th>Affiliation</th>
                        <th>Email address</th>
                        <th>Verification date</th>
                        <th>IP address</th>
                    </tr>
                </thead>
                <tbody>
                @for((ctr, index) <- transferRequests.zipWithIndex) {
                    <tr>
                        <td><input class="selected-author" type="checkbox" name="author[@index]" value="@ctr.copyrightTransferRequest.id"></td>
                        <td>@ctr.copyright.title</td>

                        <td>
                        @if(ctr.copyrightTransferRequest.status == CopyrightTransferStatus.VERIFIED) {
                            <i class="glyphicon glyphicon-ok green"></i>
                        } else {
                            <i class="glyphicon glyphicon-remove red"></i>
                        }
                        </td>

                        <td>@ctr.correspondingAuthor.getFullName</td>
                        <td>@ctr.correspondingAuthor.affiliation</td>
                        <td>@ctr.correspondingAuthor.email</td>
                        <td>
                        @if(ctr.copyrightTransferRequest.status == CopyrightTransferStatus.VERIFIED) {
                            @ctr.copyrightTransferRequest.dateVerified
                        }
                        </td>
                        <td>@ctr.copyrightTransferRequest.ipAddress</td>
                    </tr>
                }
                </tbody>
            </table>

            <script src="@routes.Assets.at("javascripts/jquery.table-filter.js")" type="text/javascript"></script>
            <script type="text/javascript">

            $ ( "#data-table" ).addTableFilter ( { inputid : 'input-filter' } ) ;

            </script>
        </div>

        <div id="bottomrow" class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <button type="submit" id="generate-report" class="btn btn-default" style="margin : 20 px 0 ; float : right ;" disabled>
                        Generate report for selected consents
                    </button>
                </div>
            </div>
        </div>
    }
}
